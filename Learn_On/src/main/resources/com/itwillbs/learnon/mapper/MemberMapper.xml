<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itwillbs.learnon.mapper.MemberMapper">

	<select id="selectMember" resultType="member">
		SELECT *
		  FROM MEMBER
		 WHERE MEM_ID = #{MEM_ID}
	</select>
	
	<select id="selectMemberPasswd" resultType="String">
	SELECT MEM_PASSWD
	  FROM MEMBER
	 WHERE MEM_ID = #{MEM_ID} 
	</select>

	
	<insert id="insertMember">
	INSERT INTO MEMBER
	VALUES(
	null
	,#{MEM_ID}
	,#{MEM_PASSWD}
	,#{MEM_NAME}
	,#{MEM_NICK}
	,#{MEM_BIRTHDAY}
	,CONCAT(#{MEM_EMAIL1},'@',#{MEM_EMAIL2})
	,#{MEM_GENDER}
	,#{MEM_PHONE}
	,#{MEM_POST_CODE}
	,#{MEM_ADDRESS1}
	,#{MEM_ADDRESS2}
	,'MEM01'
	,1
	,NOW()
	,NULL
	,#{MEM_LIKE1_CLASS}
	,#{MEM_LIKE2_CLASS}
 	,SUBSTR(#{FILE_PP}, INSTR(#{FILE_PP}, '_') + 1)
	)
	</insert>
	
	<update id="updateMember">
	UPDATE MEMBER
	SET MEM_NAME = #{MEM_NAME}
		<if test="!MEM_PASSWD.equals('')">
			,MEM_PASSWD = #{MEM_PASSWD}
		</if>
		,MEM_NICK = #{MEM_NICK}
		,MEM_POST_CODE = #{MEM_POST_CODE}
		,MEM_ADDRESS1 = #{MEM_ADDRESS1}
		,MEM_ADDRESS2 = #{MEM_ADDRESS2}
		,MEM_PHONE = #{MEM_PHONE}
	
	</update>
	
	
</mapper>